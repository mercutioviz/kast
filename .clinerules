# KAST Project - Cline Rules

## Project Context

This is the KAST (Kali Automated Scan Tool) project - a modular Python framework for automating web application security scanning.

## Instructions

For comprehensive project guidelines, architecture details, coding conventions, and development patterns, refer to:

**ðŸ“– Primary Reference:** `genai-instructions.md` (located in project root)

This file contains:
- Complete architecture documentation
- Plugin development guide with examples
- Code style and conventions
- Testing standards
- Common patterns and best practices
- Integration points between components
- Prompt engineering tips for KAST development

## Quick Reference

### Key Concepts
- **Plugin System**: All security tools are wrapped as plugins inheriting from `KastPlugin`
- **Orchestrator**: Manages plugin execution (parallel/sequential with dependency resolution)
- **Issue Registry**: Centralized security issue database at `kast/data/issue_registry.json`
- **Report Builder**: Generates HTML/PDF reports with executive summaries

### File Locations
- Plugins: `kast/plugins/`
- Tests: `kast/tests/`
- Templates: `kast/templates/`
- Documentation: `kast/docs/`

### Plugin Development
When creating plugins:
1. Start with `kast/plugins/template_plugin.py`
2. Implement required methods: `__init__`, `is_available`, `run`, `post_process`
3. Return standardized result dictionaries
4. Always include `executive_summary` in processed output
5. Map findings to issue registry where applicable

### Code Standards
- Python 3.7+ (tested on 3.9-3.11)
- PascalCase for classes, snake_case for functions
- Comprehensive error handling (never crash the orchestrator)
- Thread-safe operations for parallel execution
- Always use `self.get_result_dict()` for results

### Testing
- Use unittest framework
- Tests in `kast/tests/test_*.py`
- Run: `python -m pytest kast/tests/`
- Aim for 80%+ coverage on plugin methods

## Important Reminders

1. **Always handle report-only mode** in plugin `run()` methods
2. **Use debug logging**: `self.debug(message)` for verbose output
3. **Standardize timestamps**: Use `datetime.utcnow().isoformat(timespec="milliseconds")`
4. **Thread safety**: Use locks when writing to shared data in parallel mode
5. **Executive summaries**: Always provide high-level findings for non-technical audience

## Before Making Changes

1. Review relevant sections in `genai-instructions.md`
2. Check existing plugins for patterns
3. Verify tests exist and pass
4. Consider impact on both HTML and PDF reports
5. Test in both sequential and parallel execution modes

---

**For detailed information on any topic, always consult `genai-instructions.md`**
